# 01 디비시스템 개요
----
# DBMS의 목적
### 태초에 File Processing System이 있었다
> OS의 지원으로 특정업무에 해당하는 데이터를 여러 파일에 나누어 영구 저장하고 운영하는 시스템

이거 잘못쓰면 이 난리가 난다.
* 데이터의 부분에서
    * data dependency 종속
    * data redundancy 중복
    * data integrity violation 무결성훼손
    * concurrent access anomalies 동시접근이상
* 애플리케이션의 부분에서
    * 데이터가 애플리케이션에 종속됨

### DBMS가 나타났다
감사합니다 선배님덜
> 데이터베이스 시스템 : DBMS와 함께 사용자에게 서비스형태로 제공되는 애플리케이션이 포함된 일체의 시스템

> DBMS : 한 조직의 연관된 데이터의 집합을 다수의 사용자가 공용으로 사용하기 위해 통합 저장하는 소프트웨어 패키지

### DBMS가 해결해줄 수 있는 것
##### 1. 데이터 종속
> 저장된 데이터를 특정 HW, SW, 사용자만 이용할 수 있는 문제

아래 두 가지 측면의 데이터 독립성을 달성하고, 데이터 종속문제를 쳐냄
* 데이터 독립성
    * 논리적 데이터 독립성 : 프로그래머가 생각하는 데이터 논리구조가 변하더라도 그에 따른 프로그램의 구조가 변경되지 않는 것
    * 물리적 데이터 독립성 : 파일과 관련된 물리적 시스템구조가 변경되더라도 프로그램은 그대로 유지되는 것


##### 2. 데이터 중복
> 하나의 사항에 대한 데이터가 여러 파일에 중복되어 저장되는 문제
* 데이터 일관성 (consistency) : 하나의 사실을 나타내는 여러 데이터가 모두 논리적으로 같은 값을 유지하는 것
* 중복으로 발생하는 문제
    * 일관성 망함 : 데이터 내용간의 불일치 발생
    * 보안성 망함 : 논리적으로 동등한 데이터에 모두 같은 수준의 보안을 유지하는 것. 이게 안됨
    * 경제성 망함 : 추가적인 스토리지 구매비용 발생. 데이터 갱신시 모든 중복데이터를 작업하므로 시스템 갱신비용 증가. 길거리로 나앉을 확률 증가.

##### 3. 데이터 무결성 훼손
* 데이터 무결성 (integrity)
    * 데이터의 정확성 보장
    * 데이터의 값 + 값에 대한 제약조건 동시에 만족하도록 보장

무결성 훼손은 중복데이터가 일관성을 잃어버린 경우에도 발생할 수 있다.

##### 4. 동시 접근 이상
동일 데이터에 다수 사용자의 접근 허용시 데이터의 일관성이 훼손될 수 있다.

---
# DBMS의 특징

### 프로그램-데이터 독립성 (DBMS 존재이유)
> 데이터의 사용과 관리의 영역이 분리되는 것

**추상화** 작업으로 데이터를 구조화하고, 사용자는 **개념적 표현**을 이용하여 의미만으로 데이터를 획득

### 자기기술성
> 데이터 자체뿐만 아니라 데이터의 정의, 의미까지 관리하는 것

```
value : 특정 사건에서 발생한 어떤 기준에 따른 정량적인 수치
meta data : 값에 의미를 부여하는 수식항목
data : 값 + 메타데이터
information : 쓸모있는 형태로 가공된 데이터
```
DBMS는 DB에 대한 메타데이터를 **System catalog**, **data dictionary**에 저장.
실제 데이터를 읽고쓰기전에 참고.

### 다중 뷰
> View : 사용자의 역할, 권한에 맞는 데이터에 접근할 수 있도록 DB에 대해 필요한 부분만을 추출해서 제공하는 데이터

뷰를 사용하면 중복데이터 없이 데이터 일관성을 유지가능

### 다수 사용자 요청 처리
다수 사용자 요청 케어못해주면 데이터 일관성 망함. 아래 두 가지의 기능으로 일관성 보장.
* transaction : 단일 논리적인 작업을 수행하는 일련의 DB명령 집합
* concurrency control

---
# DBMS의 구조
### 추상화 (abstraction)
Data abstraction과 independency를 확보하기 위한 3단계 구조로 구성
##### 1. internal level
* internal schema
* 원시수준의 물리적, 구체적 사항에 대해 정의
* 연속적으로 저장된 block으로 데이터 표현
##### 2. conceptual level
* conceptual schema
* 물리적 상세사항 배제. DB에 무엇이 저장되어있는지 + 데이터간의 관계 기술.
* 보안성 검사, 무결성 검사 등 부가적 특징을 포함하기도 함
##### 3. external level
* external schema = View
* 사용자가 관심갖는 DB의 일부만 기술하고 나머지는 은폐

### 사상 (mapping)
DBMS의 3단계 구조는 mapping을 통해 schema사이를 연결
* external-conceptual mapping
    * conceptual schema에 변화가 생겨도 해당 mapping에만 변경사항 반영하면 됨
    * logical data independency확보
* conceptual-internal mapping
    * 피지컬한 변화가 생겨도 해당 mapping에만 변경사항 반영하면 됨
    * physical data independency 확보

---
# DB언어
> DBMS에 요청하기 위한 언어 형태의 인터페이스

현대 DB언어는 거진 SQL로 표준화가 돼있음
### DDL(Data Definition Language)
schema 정의(생성, 수정, 삭제)
* 만족요건
    * 데이터의 논리적 구성,특징을 데이터 모델에 의거하여 규정
    * 데이터가 기억장치에 저장되도록 데이터의 물리적 구성을 규정
    * 데이터의 물리적 구성과 논리적 구성간의 사상(mapping)을 규정
* 결과는 System catalog(data dictionay)에서 관리
### DML(Data Manipulation Language)
> 구조화된 데이터에 사용자가 데이터를 삽입, 수정, 삭제하고 저장된 데이터를 검색할 수 있도록 하는 언어

갱신, 질의할때 쓴다는 소리
* 요구조건
    * 데이터조작이 쉽고 간편
    * 데이터 조작 기능이 모호함 없이 정확하고 완전
    * 시스템 내부에서 효율적으로 처리
* 유형
    * procedural DML : 처리절차를 구체적으로 명시. 일반적 프로그래밍 언어 기능 포함.
    * declarative(nonprocedural) DML : 처리절차 없이 데이터가 만족할 조건만 기술 - 비효율적이기 때문에 DBMS가 알잘딱으로 질의최적화
---

# DB시스템 아키텍쳐
### 중앙집중식 DBMS 구조
중앙 컴퓨터가 모든기능을 싹다 집어삼킴. 자체적 처리능력없는 터미널 사용.
##### 문제
* 중앙서버에 너무 많은 부하 집중 ---> 병목현상 ---> 전체적 성능저하
* 오류발생시 전체 시스템 중단

### 클라이언트-서버 구조 (= CS 컴퓨팅 모델 = 분산시스템 방식)
##### 등장배경
* 하드웨어 제조기술 발달
* 일반사용자 단말장치 가격 하락 + 자체적 처리능력 보유
##### 해결할 수 있는 문제
* 프로그램의 부하 분산, 시스템 성능 향상
* 프로그램 유지보후 비용 절감
* 이식성 증가
##### 계층별 분류
```[ client ] --(네트웍)-- [ server ]```
* 2계층 구조
    * [ 사용자 - 앱 ] --(네트웍)-- [ DB시스템 ]
    * 장점 : 단순함, 하위 호환성
    * DBMS서버 다른이름 : query server, transaction server, SQL server
* 3계층 구조
    * [ 사용자 - 앱 클라이언트 ] --(네트웍)-- [ 앱 서버 - DB시스템 ]
    * 애플리케이션 서버 : DB접근에 사용하는 비즈니스 규칙(프로시져, 제약조건)을 저장